!function(){var t={6295:function(t,e,n){"use strict";n.r(e);n(2422);e.default=new class{constructor(){return this.component=this.component.bind(this),this.component}component(t,e,...n){if("function"==typeof t)return t({...e,children:n});n&&(n=n.filter((t=>null!==t))),e&&(e.class&&(e.className=e.class),delete e.children);let o="fragment"!==t?function(t,e){e=e||{};let n=document.createElement(t);try{n=Object.assign(n,e)}catch{const t=Object.keys(e);for(let o=0;o<t.length;o++)"dataSet"!==e[o]&&n.setAttribute(t[o],e[t[o]])}return n}(t,e):document.createDocumentFragment();if(-1!==["svg","path","rect","text","circle","g"].indexOf(t)){o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const t in e){const n="className"===t?"class":t;o.setAttribute(n,e[t])}}for(const t of n)Array.isArray(t)?o.append(...t):o.append(t);if(null!=e&&e.dataSet)for(const t in e.dataSet)Object.prototype.hasOwnProperty.call(e.dataSet,t)&&(o.dataset[t]=e.dataSet[t]);return e&&!window.__aleartedJSXData&&Object.keys(e).find((t=>t.match(/^data-/)))&&(alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),null!=e&&e.ref&&("function"==typeof e.ref?e.ref(o):e.ref=o),null!=e&&e.on&&Object.entries(e.on).forEach((([t,e])=>{o.addEventListener(t,e)})),null!=e&&e.style&&Object.entries(e.style).forEach((([t,e])=>{o.style.setProperty(t,e)})),o}}},2422:function(){!function(){function t(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){var n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))})),this.appendChild(e)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})}))}()},643:function(t){var e="complete",n="canceled";function o(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function i(t){var n=t._scrollSettings;if(n){var l=n.maxSynchronousAlignments,s=function(t,e){var n,o,i,l,s,r,a,c=t.align,d=t.target.getBoundingClientRect(),u=c&&null!=c.left?c.left:.5,p=c&&null!=c.top?c.top:.5,h=c&&null!=c.leftOffset?c.leftOffset:0,m=c&&null!=c.topOffset?c.topOffset:0,f=u,v=p;if(t.isWindow(e))r=Math.min(d.width,e.innerWidth),a=Math.min(d.height,e.innerHeight),o=d.left+e.pageXOffset-e.innerWidth*f+r*f,i=d.top+e.pageYOffset-e.innerHeight*v+a*v,i-=m,l=(o-=h)-e.pageXOffset,s=i-e.pageYOffset;else{r=d.width,a=d.height,n=e.getBoundingClientRect();var w=d.left-(n.left-e.scrollLeft),g=d.top-(n.top-e.scrollTop);o=w+r*f-e.clientWidth*f,i=g+a*v-e.clientHeight*v,o-=h,i-=m,o=Math.max(Math.min(o,e.scrollWidth-e.clientWidth),0),i=Math.max(Math.min(i,e.scrollHeight-e.clientHeight),0),l=o-e.scrollLeft,s=i-e.scrollTop}return{x:o,y:i,differenceX:l,differenceY:s}}(n,t),r=Date.now()-n.startTime,a=Math.min(1/n.time*r,1);if(n.endIterations>=l)return o(t,s.x,s.y),t._scrollSettings=null,n.end(e);var c=1-n.ease(a);if(o(t,s.x-s.differenceX*c,s.y-s.differenceY*c),r>=n.time)return n.endIterations++,i(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(i.bind(null,t))}}function l(t){return t.self===t}function s(t,e,o,s){var r,a=!e._scrollSettings,c=e._scrollSettings,d=Date.now(),u={passive:!0};function p(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),o.debug,s(t),r&&(e.removeEventListener("touchstart",r,u),e.removeEventListener("wheel",r,u))}c&&c.end(n);var h=o.maxSynchronousAlignments;return null==h&&(h=3),e._scrollSettings={startTime:d,endIterations:0,target:t,time:o.time,ease:o.ease,align:o.align,isWindow:o.isWindow||l,maxSynchronousAlignments:h,end:p},"cancellable"in o&&!o.cancellable||(r=p.bind(null,n),e.addEventListener("touchstart",r,u),e.addEventListener("wheel",r,u)),a&&i(e),r}function r(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function a(){return!0}function c(t){if(t.assignedSlot)return c(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}t.exports=function(t,n,o){if(t){"function"==typeof n&&(o=n,n=null),n||(n={}),n.time=isNaN(n.time)?1e3:n.time,n.ease=n.ease||function(t){return 1-Math.pow(1-t,t/2)};var i,l=c(t),d=1,u=n.validTarget||a,p=n.isScrollable;for(n.debug;l;)if(n.debug,u(l,d)&&(p?p(l,r):r(l))&&(d++,i=s(t,l,n,h)),!(l=c(l))){h(e);break}return i}function h(t){--d||o&&o(t)}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var l=e[o]={exports:{}};return t[o](l,l.exports,n),l.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(643),n(6295).default;window.__getSectionInstanceByType=t=>window.Shopify.theme.sections.instances.find((e=>e.type===t));document.querySelector("#scroll-to-top-target");var e=n(6295).default;function o(){return e("div",{style:{"--tw-bg-opacity":"0.3"},className:"sf-modal sf-modal__wrapper fixed inset-0 z-50 px-5 bg-black flex items-center justify-center transition-opacity opacity-0 duration-200 ease-out"},e("div",{className:"sf-modal__content bg-white relative overflow-y-scroll rounded max-h-[90vh]"},e("button",{className:"sf-modal__close text-black absolute right-4 top-4 p-2 bg-white hover:bg-gray-300 rounded-full z-10"},e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))}const i=({context:t=document.documentElement,event:e="click",selector:n,handler:o})=>{const i=function(t){for(let e=t.target;e&&e!==this;e=e.parentNode)if(e.matches(n)){o.call(e,t,e);break}};return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}};var l=class{constructor(e){t(this,"enable",(()=>{this.lastScrollPosition=window.pageYOffset,this.scrollTarget.style.overflow="hidden",this.scrollTarget.style.position="fixed",this.scrollTarget.style.top=`-${this.lastScrollPosition}px`,this.scrollTarget.style.width="100%"})),t(this,"disable",(()=>{this.scrollTarget.style.removeProperty("overflow"),this.scrollTarget.style.removeProperty("position"),this.scrollTarget.style.removeProperty("top"),this.scrollTarget.style.removeProperty("width"),window.scrollTo(0,this.lastScrollPosition)})),this.scrollTarget=e,this.lastScrollPosition=0}},s=n(6295).default;window.spratlyTheme=window.spratlyTheme||{};var r=class{constructor(){var e;t(this,"init",(()=>{i({selector:".sf-modal__wrapper",handler:t=>{var e;((null==t?void 0:t.target)===this.modal||null!=t&&null!==(e=t.target)&&void 0!==e&&e.closest(".sf-modal__close"))&&this.close(t)}})})),t(this,"setSizes",((t="")=>{this.resetSize(),this.sizes=t,t.split(" ").forEach((t=>{var e,n;null===(e=this.modalContent)||void 0===e||null===(n=e.classList)||void 0===n||n.add(t)}))})),t(this,"setWidth",(t=>{this.modalContent.style.width=t})),t(this,"resetSize",(()=>{this.sizes&&(this.sizes.split(" ").forEach((t=>{var e,n;null===(e=this.modalContent)||void 0===e||null===(n=e.classList)||void 0===n||n.remove(t)})),this.sizes="")})),t(this,"appendChild",(t=>{var e;null==this||null===(e=this.modalContent)||void 0===e||e.appendChild(t),this.children=t})),t(this,"removeChild",(()=>{var t;null==this||null===(t=this.children)||void 0===t||t.remove()})),t(this,"open",(()=>{this.scrollLock.enable(),document.body.appendChild(this.modal),setTimeout((()=>this.modal.classList.add("opacity-100"))),window.addEventListener("keydown",this.handleKeyDown)})),t(this,"close",(t=>{null==t||t.preventDefault(),this.modal.classList.remove("opacity-100"),this.scrollLock.disable(),window.removeEventListener("keydown",this.handleKeyDown),setTimeout((()=>{this.modal.remove(),this.removeChild(),this.resetSize(),this.modalContent.style.removeProperty("width")}),this.transitionDuration)})),t(this,"handleKeyDown",(t=>{27===t.keyCode&&this.close()})),this.modal=s(o,null),this.modalContent=null===(e=this.modal)||void 0===e?void 0:e.firstChild,this.transitionDuration=200,this.init(),this.scrollLock=new l(document.body)}};function a(t,e){if(null===e)return t;if("master"===e)return c(t);const n=t.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?$/i);if(n){const o=t.split(n[0]),i=n[0];return c(`${o[0]}_${e}${i}`)}return null}function c(t){return t.replace(/http(s)?:/,"")}const d={mode:"same-origin",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};new Map;const u=new Map;function p(t,e){"string"==typeof t&&(t=t.replace(".",""));let n="";const o=/\{\{\s*(\w+)\s*\}\}/,i=e||"${{amount}}";function l(t,e=2,n=",",o="."){if(isNaN(t)||null==t)return 0;const i=(t=(t/100).toFixed(e)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,`$1${n}`)+(i[1]?o+i[1]:"")}switch(i.match(o)[1]){case"amount":n=l(t,2);break;case"amount_no_decimals":n=l(t,0);break;case"amount_with_comma_separator":n=l(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=l(t,0,".",",")}return i.replace(o,n)}var h=n(6295).default;function m(t){return`https://${window.Shopify.shop}/products/${t}`}async function f(t){if((null==t?void 0:t.length)<1)return[];let e={},n=[];const o=t.map((async t=>{const n=await((t,e=d)=>new Promise(((n,o)=>{if(u.get(t))return n(u.get(t));fetch(t,e).then((e=>{const o=e.json();return n(o),u.set(t,o),o})).catch(o)})))(`/products/${t}.js`);n&&(e[t]=n)}));return await Promise.all(o),t.map((t=>{n.push(e[t])})),n}String.prototype.capitalize||(String.prototype.capitalize=function(){var t,e;return this.replace(this[0],null===(t=this[0])||void 0===t||null===(e=t.toUpperCase)||void 0===e?void 0:e.call(t))});var v=n(6295).default;function w({product:t,recommended_products:e,settings:n}){var o,i,l;const{item_count:s,total_price:r}=null===(o=window.spratlyTheme)||void 0===o?void 0:o.Cart.cart,{discount:c,active_discount:d}=n,u=v("span",{className:"f-upsell__footer-cart-total"});return u.innerHTML=p(r,null===(i=window)||void 0===i||null===(l=i.spratlyThemeSettings)||void 0===l?void 0:l.money_format),v("div",{className:"f-upsell"},v("div",{className:"f-upsell__header"},t.featured_image?v("div",{className:"f-upsell__header-image"},v("img",{src:a(t.featured_image,"100x"),alt:""})):"",v("div",{className:"f-upsell__header-info"},v("p",null,v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"15",fill:"none",viewBox:"0 0 14 15"},v("path",{fill:"#000",d:"M2.1875 2.96484C3.51823 1.63411 5.1224.96875 7 .96875c1.8776 0 3.4727.66536 4.7852 1.99609 1.3307 1.3125 1.996 2.90756 1.996 4.78516 0 1.8776-.6653 3.4818-1.996 4.8125C10.4727 13.875 8.8776 14.5312 7 14.5312c-1.8776 0-3.48177-.6562-4.8125-1.9687C.875 11.2318.21875 9.6276.21875 7.75c0-1.8776.65625-3.47266 1.96875-4.78516zm8.668.92969C9.79818 2.81901 8.51302 2.28125 7 2.28125s-2.80729.53776-3.88281 1.61328C2.0599 4.95182 1.53125 6.23698 1.53125 7.75s.52865 2.8073 1.58594 3.8828C4.19271 12.6901 5.48698 13.2188 7 13.2188s2.79818-.5287 3.8555-1.586c1.0755-1.0755 1.6133-2.36978 1.6133-3.8828s-.5378-2.79818-1.6133-3.85547zm-.0274 1.94141c.1641.16406.1641.31901 0 .46484L6.125 10.9766c-.16406.164-.31901.164-.46484 0L3.17188 8.48828c-.16407-.16406-.16407-.31901 0-.46484l.6289-.62891c.14583-.14583.30078-.14583.46484 0L5.87891 9.0625l3.88281-3.85547c.14583-.14583.30078-.13672.46488.02735l.6015.60156z"}))," You just added"),v("h4",null,null==t?void 0:t.title))),v("div",{className:"f-upsell__body"},v("h4",null,"Frequently bought with ",v("strong",null,'"',null==t?void 0:t.title,'"')),d?v("div",{className:"f-upsell__discount mb-4"},v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",fill:"none",viewBox:"0 0 18 19"},v("path",{fill:"#DA3F3F",d:"M17.4375 7.49219C17.8125 8.00781 18 8.59375 18 9.25s-.1875 1.2539-.5625 1.793c-.375.5156-.8555.8789-1.4414 1.0898.2578.5625.3281 1.1719.2109 1.8281-.0937.6329-.375 1.1836-.8437 1.6524-.4688.4687-1.0195.75-1.6524.8437-.6328.1172-1.2421.0469-1.8281-.2109-.1406.3984-.3516.7383-.6328 1.0195-.2812.3047-.6211.5391-1.0195.7032-.37503.1874-.78519.2812-1.2305.2812-.65625 0-1.25391-.1875-1.79297-.5625-.51562-.375-.87891-.8555-1.08984-1.4414-.58594.2578-1.19531.3281-1.82813.2109-.63281-.0937-1.18359-.375-1.65234-.8437-.46875-.4688-.76172-1.0195-.87891-1.6524-.09375-.6562-.01172-1.2656.2461-1.8281C1.41797 11.9219.9375 11.5586.5625 11.043.1875 10.5039 0 9.90625 0 9.25s.1875-1.24219.5625-1.75781c.375-.53906.85547-.91407 1.44141-1.125-.25782-.5625-.33985-1.16016-.2461-1.79297.11719-.65625.41016-1.21875.87891-1.6875.46875-.46875 1.01953-.75 1.65234-.84375.65625-.11719 1.26563-.04688 1.82813.21094.21093-.58594.57422-1.06641 1.08984-1.44141C7.74609.4375 8.34375.25 9 .25s1.2422.1875 1.7578.5625c.5391.375.9141.85547 1.125 1.44141.5625-.25782 1.1602-.32813 1.793-.21094.6562.09375 1.2187.375 1.6875.84375.4687.46875.75 1.03125.8437 1.6875.1172.63281.0469 1.23047-.2109 1.79297.5859.21093 1.0664.58594 1.4414 1.125zM7.52344 6.22656C7.3125 5.99219 7.05469 5.875 6.75 5.875s-.57422.11719-.80859.35156C5.73047 6.4375 5.625 6.69531 5.625 7s.10547.57422.31641.80859c.23437.21094.5039.31641.80859.31641s.5625-.10547.77344-.31641C7.75781 7.57422 7.875 7.30469 7.875 7s-.11719-.5625-.35156-.77344zm-.35156 6.04684l4.85152-4.85152c.2578-.25782.2578-.51563 0-.77344l-.4218-.42188c-.2578-.25781-.5157-.25781-.7735 0L5.97656 11.0781c-.25781.2578-.25781.5157 0 .7735l.42188.4218c.25781.2578.51562.2578.77344 0zm3.26952.0352c.2344.2109.5039.3164.8086.3164.3047 0 .5625-.1055.7734-.3164.2344-.2344.3516-.5039.3516-.8086 0-.3047-.1172-.5625-.3516-.7734-.2109-.2344-.4687-.3516-.7734-.3516-.3047 0-.5742.1172-.8086.3516-.2109.2109-.3164.4687-.3164.7734 0 .3047.1055.5742.3164.8086z"})),function(t){var e,n,o,i;const l=h("span",null),s="PERCENTAGE"===(null==t?void 0:t.type)?`${null==t?void 0:t.value}%`:p(100*(null==t?void 0:t.value)*Number((null===(e=window.Shopify)||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.rate)||1),null===(o=window)||void 0===o||null===(i=o.spratlyThemeSettings)||void 0===i?void 0:i.money_format);return l.innerHTML=`You will get <strong>${s} OFF</strong> on each product`,l}(c)):"",v("div",{className:"f-upsell__products"},(null==e?void 0:e.length)&&(null==e?void 0:e.map((t=>{var e;const o=v("div",{className:"f-upsell__product-prices prod__price"}),{price_max:i,price_min:l,available:s}=t;var r,d,u,h;i===l?o.innerHTML=p(i,null===(r=window)||void 0===r||null===(d=r.spratlyThemeSettings)||void 0===d?void 0:d.money_format):o.innerHTML=`from ${p(l,null===(u=window)||void 0===u||null===(h=u.spratlyThemeSettings)||void 0===h?void 0:h.money_format)}`;const f=t.variants[0],w=1===t.variants.length&&"default title"===f.title.toLowerCase();return v("div",{className:"f-upsell__product sf-prod__block",dataSet:{view:"card"}},v("form",{className:"f-upsell__product-inner product-form form",noValidate:!0,dataSet:{productId:t.id,productHandle:t.handle}},v("input",{type:"hidden",name:"form_type",value:"product"}),v("input",{type:"hidden",name:"utf8",value:"✓"}),v("input",{type:"hidden",name:"id",value:f.id}),v("input",{type:"hidden",name:"source_event",value:"prepurchase-upsell"}),v("input",{type:"hidden",name:"properties[_foxDiscount]",value:`{"discount_value": ${c.value}, "discount_type": "${c.type}", "offer_id": "${n._id}", "plugin": "PrePurchase"}`}),v("div",{className:"f-upsell__product-image spc__main-img"},v("a",{href:m(t.handle)},v("img",{src:t.featured_image?a(t.featured_image,"300x"):"https://dummyimage.com/300x/ddd/aaa",alt:t.title}))),v("div",{className:"f-upsell__product-info"},v("h3",{className:"h4"},v("a",{href:m(t.handle)},t.title)),o,w?"":v("div",{className:"f-upsell__product-options"},v("select",{className:"sf-product-variant-option-dropdown form-control combined-variant"},null===(e=t.variants)||void 0===e?void 0:e.map((t=>v("option",{value:t.id},null==t?void 0:t.title))))),v("button",{type:"submit",className:"add-to-cart sf__btn sf__btn-primary btn-atc relative",disabled:!s},v("span",{className:"atc-spinner inset-0 absolute items-center justify-center"},v("svg",{className:"animate-spin medium",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},v("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),v("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))),v("span",{dataSet:{addToCartText:window.spratlyThemeStrings.addToCart,soldOut:window.spratlyThemeStrings.soldOut,unavailable:window.spratlyThemeStrings.unavailable}},s?window.spratlyThemeStrings.addToCart:window.spratlyThemeStrings.soldOut)))))}))))),v("div",{className:"f-upsell__footer"},v("div",{className:"f-upsell__footer-cart"},v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"21",fill:"none",viewBox:"0 0 18 21"},v("path",{fill:"#000",d:"M13.75 5.5h3.75v11.875c0 .8594-.3125 1.5885-.9375 2.1875-.599.625-1.3281.9375-2.1875.9375H3.125c-.85938 0-1.60156-.3125-2.226562-.9375C.299479 18.9635 0 18.2344 0 17.375V5.5h3.75c0-1.38021.48177-2.55208 1.44531-3.51562C6.1849.994792 7.36979.5 8.75.5c1.3802 0 2.5521.494792 3.5156 1.48438C13.2552 2.94792 13.75 4.11979 13.75 5.5zm-2.8125-2.1875c-.599-.625-1.32812-.9375-2.1875-.9375s-1.60156.3125-2.22656.9375C5.92448 3.91146 5.625 4.64062 5.625 5.5h6.25c0-.85938-.3125-1.58854-.9375-2.1875zM15.625 17.375v-10H13.75v1.5625c0 .26042-.0911.48177-.2734.66406-.1823.18229-.4037.27344-.6641.27344s-.4818-.09115-.6641-.27344c-.1823-.18229-.2734-.40364-.2734-.66406V7.375h-6.25v1.5625c0 .26042-.09115.48177-.27344.66406s-.40364.27344-.66406.27344-.48177-.09115-.66406-.27344S3.75 9.19792 3.75 8.9375V7.375H1.875v10c0 .3385.11719.625.35156.8594.26042.2604.5599.3906.89844.3906h11.25c.3385 0 .625-.1302.8594-.3906.2604-.2344.3906-.5209.3906-.8594z"})),v("span",{className:"f-upsell__footer-cartcount"},s),u||""),v("div",{className:"f-upsell__footer-action"},v("button",{className:"sf__btn sf__btn-primary btn-checkout",name:"checkout"},window.spratlyThemeStrings.checkout))))}var g=n(6295).default;window.FoxKit=window.FoxKit||{},window.FoxKit.PrePurchase=class{constructor(e){t(this,"selectors",{container:".f-upsell",productContainer:'[data-section-id="product-template"]',productItem:".f-upsell__product",productOptions:[".f-upsell__product-variant"]}),t(this,"classes",{}),t(this,"appURL",window.spratlyThemeSettings.foxkitAppURL),t(this,"cartCount",0),t(this,"cartTotal",0),t(this,"init",(async()=>{var t,e,n;null===(t=window)||void 0===t||null===(e=t._ThemeEvent)||void 0===e||null===(n=e.subscribe)||void 0===n||n.call(e,"ON_ITEM_ADDED",(async t=>{const{source:e,payload:n}=t;if("incart-upsell"!==e&&n){var o,i,l,s;this.product={featured_image:null===(o=n.featured_image)||void 0===o?void 0:o.url,handle:n.handle,id:n.product_id,title:n.product_title};const t=await this.getOffer(n.product_id);var r,a,c;if(null!=t&&t.ok&&null!=t&&null!==(i=t.payload)&&void 0!==i&&i.prePurchase&&null!=t&&null!==(l=t.payload)&&void 0!==l&&null!==(s=l.prePurchase)&&void 0!==s&&s.recommended_products.length)null===(r=window.spratlyTheme)||void 0===r||null===(a=r.ProductQuickView)||void 0===a||a.close(),this.settings=null===(c=t.payload)||void 0===c?void 0:c.prePurchase,this.open()}}))})),t(this,"open",(async()=>{await this.getProductsJson(),this.component=g(w,{product:this.product,recommended_products:this.products,settings:this.settings,cart:this.cart}),window.spratlyTheme.Products.initProductForms({context:this.component}).catch(console.error),this.popup.removeChild(),this.popup.appendChild(this.component),this.popup.open()})),t(this,"getOffer",(t=>new Promise(((e,n)=>{let o=`${this.appURL}/api/public/?shop=${window.Shopify.shop}&plugin=prePurchase&productId=${t}`;fetch(o).then((t=>t.json())).then(e).catch(n)})))),t(this,"getProductsJson",(async()=>{var t;this.products=await f(null===(t=this.settings)||void 0===t?void 0:t.recommended_products)})),this.settings=e,this.domNodes=function(t={},e=document){return Object.entries(t).reduce(((t,[n,o])=>{var i;const l="string"==typeof o,s=l?"querySelector":"querySelectorAll",r=l?o:o[0];return t[n]=null==e||null===(i=e[s])||void 0===i?void 0:i.call(e,r),!l&&t[n]&&(t[n]=[...t[n]]),t}),{})}(this.selectors),this.popup=new r,this.appURL=`https://${this.appURL}`,this.init()}}}()}();