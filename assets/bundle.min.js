!function(){var t={7345:function(t,e,n){"use strict";n.r(e);var o=n(4942);const a=window.__i18n||new class{constructor(){var t;(0,o.Z)(this,"shop_locale",(null===(t=window.spratlyThemeSettings)||void 0===t?void 0:t.shop_primary_locale)||"en"),(0,o.Z)(this,"locales",{default:{add_button:"Add",added_button:"Added",bundle_button:"Add selected item(s)",bundle_saved:"Saved",bundle_select:"Select",bundle_selected:"Selected",bundle_this_item:"This item",bundle_total:"Total price",checkout:"Checkout",discount_summary:"You will get <strong>{discount_value} OFF</strong> on each product",discount_title:"SPECIAL OFFER",free:"FREE",incart_title:'Customers also bought with "{product_title}"',prepurchase_added:"You just added",prepurchase_title:'Frequently bought with "{product_title}"',qty_discount_note:"on each product",qty_discount_title:"{item_count} item(s) get {discount_value} OFF",sizechart_button:"Size chart",field_name:"Enter your name",field_email:"Enter your email",field_birthday:"Date of birth"}}),(0,o.Z)(this,"tr",((t,e={})=>{var n;const{locales:o,shop_locale:a}=this;let s=(null===(n=o[a])||void 0===n?void 0:n[t])||o.default[t]||`Foxkit: translation missing for ${t}!`;return Object.keys(e).length&&Object.entries(e).forEach((([t,e])=>s=s.replace(`{${t}}`,e))),s})),(0,o.Z)(this,"setLocales",((t,e)=>{this.locales[t]=e}))}};window.__i18n=window.__i18n||a,e.default=a},6295:function(t,e,n){"use strict";n.r(e);n(2422);e.default=new class{constructor(){return this.component=this.component.bind(this),this.component}component(t,e,...n){if("function"==typeof t)return t({...e,children:n});n&&(n=n.filter((t=>null!==t))),e&&(e.class&&(e.className=e.class),delete e.children);let o="fragment"!==t?function(t,e){e=e||{};let n=document.createElement(t);try{n=Object.assign(n,e)}catch{const t=Object.keys(e);for(let o=0;o<t.length;o++)"dataSet"!==e[o]&&n.setAttribute(t[o],e[t[o]])}return n}(t,e):document.createDocumentFragment();if(-1!==["svg","path","rect","text","circle","g"].indexOf(t)){o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const t in e){const n="className"===t?"class":t;o.setAttribute(n,e[t])}}for(const t of n)Array.isArray(t)?o.append(...t):o.append(t);if(null!=e&&e.dataSet)for(const t in e.dataSet)Object.prototype.hasOwnProperty.call(e.dataSet,t)&&(o.dataset[t]=e.dataSet[t]);return e&&!window.__aleartedJSXData&&Object.keys(e).find((t=>t.match(/^data-/)))&&(alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),null!=e&&e.ref&&("function"==typeof e.ref?e.ref(o):e.ref=o),null!=e&&e.on&&Object.entries(e.on).forEach((([t,e])=>{o.addEventListener(t,e)})),null!=e&&e.style&&Object.entries(e.style).forEach((([t,e])=>{o.style.setProperty(t,e)})),o}}},2422:function(){!function(){function t(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){var n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))})),this.appendChild(e)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})}))}()},643:function(t){var e="complete",n="canceled";function o(t,e,n){Math.max(0,e),Math.max(0,n),t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function a(t){var n=t._scrollSettings;if(n){var s=n.maxSynchronousAlignments,i=function(t,e){var n,o,a,s,i,l,r,c=t.align,d=t.target.getBoundingClientRect(),u=c&&null!=c.left?c.left:.5,p=c&&null!=c.top?c.top:.5,h=c&&null!=c.leftOffset?c.leftOffset:0,m=c&&null!=c.topOffset?c.topOffset:0,f=u,v=p;if(t.isWindow(e))l=Math.min(d.width,e.innerWidth),r=Math.min(d.height,e.innerHeight),o=d.left+e.pageXOffset-e.innerWidth*f+l*f,a=d.top+e.pageYOffset-e.innerHeight*v+r*v,o-=h,a-=m,o=t.align.lockX?e.pageXOffset:o,a=t.align.lockY?e.pageYOffset:a,s=o-e.pageXOffset,i=a-e.pageYOffset;else{l=d.width,r=d.height,n=e.getBoundingClientRect();var g=d.left-(n.left-e.scrollLeft),_=d.top-(n.top-e.scrollTop);o=g+l*f-e.clientWidth*f,a=_+r*v-e.clientHeight*v,o-=h,a-=m,o=Math.max(Math.min(o,e.scrollWidth-e.clientWidth),0),a=Math.max(Math.min(a,e.scrollHeight-e.clientHeight),0),o=t.align.lockX?e.scrollLeft:o,a=t.align.lockY?e.scrollTop:a,s=o-e.scrollLeft,i=a-e.scrollTop}return{x:o,y:a,differenceX:s,differenceY:i}}(n,t),l=Date.now()-n.startTime,r=Math.min(1/n.time*l,1);if(n.endIterations>=s)return o(t,i.x,i.y),t._scrollSettings=null,n.end(e);var c=1-n.ease(r);if(o(t,i.x-i.differenceX*c,i.y-i.differenceY*c),l>=n.time)return n.endIterations++,n.scrollAncestor&&a(n.scrollAncestor),void a(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(a.bind(null,t))}}function s(t){return t.self===t}function i(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function l(){return!0}function r(t){if(t.assignedSlot)return r(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e.host}}t.exports=function(t,o,c){if(t){"function"==typeof o&&(c=o,o=null),o||(o={}),o.time=isNaN(o.time)?1e3:o.time,o.ease=o.ease||function(t){return 1-Math.pow(1-t,t/2)},o.align=o.align||{};var d=r(t),u=1,p=o.validTarget||l,h=o.isScrollable;o.debug;for(var m=[];d;)if(o.debug,p(d,u)&&(h?h(d,i):i(d))&&(u++,m.push(d)),!(d=r(d))){f(e);break}return m.reduce(((e,i,l)=>function(t,e,o,i,l){var r,c=!e._scrollSettings,d=e._scrollSettings,u=Date.now(),p={passive:!0};function h(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),o.debug,l(t),r&&(e.removeEventListener("touchstart",r,p),e.removeEventListener("wheel",r,p))}d&&d.end(n);var m=o.maxSynchronousAlignments;return null==m&&(m=3),e._scrollSettings={startTime:u,endIterations:0,target:t,time:o.time,ease:o.ease,align:o.align,isWindow:o.isWindow||s,maxSynchronousAlignments:m,end:h,scrollAncestor:i},"cancellable"in o&&!o.cancellable||(r=h.bind(null,n),e.addEventListener("touchstart",r,p),e.addEventListener("wheel",r,p)),c&&a(e),r}(t,i,o,m[l+1],f)),null)}function f(t){--u||c&&c(t)}}},4942:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return o}})}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";var t=n(4942),e=n(6295).default;function o({className:t=""}){return e("svg",{className:`animate-spin hidden w-[20px] h-[20px] ${t}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}function a(t,e){"string"==typeof t&&(t=t.replace(".",""));let n="";const o=/\{\{\s*(\w+)\s*\}\}/,a=e||"${{amount}}";function s(t,e=2,n=",",o="."){if(isNaN(t)||null==t)return 0;const a=(t=(t/100).toFixed(e)).split(".");return a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,`$1${n}`)+(a[1]?o+a[1]:"")}switch(a.match(o)[1]){case"amount":n=s(t,2);break;case"amount_no_decimals":n=s(t,0);break;case"amount_with_comma_separator":n=s(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=s(t,0,".",",")}return a.replace(o,n)}const s=({context:t=document.documentElement,event:e="click",selector:n,handler:o})=>{const a=function(t){for(let e=t.target;e&&e!==this;e=e.parentNode)if(e.matches(n)){o.call(e,t,e);break}};return t.addEventListener(e,a,!1),()=>{t.removeEventListener(e,a,!1)}};n(6295).default;const i={mode:"same-origin",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};function l(){return JSON.parse(JSON.stringify(i))}const r=new Map;new Map,new Map;n(643),n(6295).default;window.__getSectionInstanceByType=t=>window.Shopify.theme.sections.instances.find((e=>e.type===t));document.querySelector("#scroll-to-top-target");var c=n(6295).default;function d({type:t,message:e,onclick:n}){let o;return"warning"===t?o=c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})):"success"===t&&(o=c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),c("div",{className:`notification ${t}`,onclick:n},o,c("div",{className:"ml-3 text-sm md:text-base"},e))}var u=n(6295).default;var p=new class{constructor(){(0,t.Z)(this,"noti",null),(0,t.Z)(this,"removeTimeoutId",null),(0,t.Z)(this,"hideTimeoutId",null),(0,t.Z)(this,"transitionDuration",300),(0,t.Z)(this,"show",(({target:t,type:e,message:n,method:o="after",last:a=3e3,delay:s=0})=>{this.clearTimeout(),this.removeNoti(),setTimeout((()=>{this.noti=u(d,{type:e,message:n,onclick:this.handleClick}),null==t||t[o](this.noti),requestAnimationFrame((()=>this.noti.classList.add("show"))),this.hideTimeoutId=setTimeout((()=>{this.noti.classList.add("hide"),this.removeTimeoutId=setTimeout(this.removeNoti,2*this.transitionDuration)}),a)}),s)})),(0,t.Z)(this,"handleClick",(()=>{clearTimeout(this.removeTimeoutId),this.noti.classList.add("hide"),setTimeout(this.removeNoti,2*this.transitionDuration)})),(0,t.Z)(this,"clearTimeout",(()=>{clearTimeout(this.removeTimeoutId),clearTimeout(this.hideTimeoutId)})),(0,t.Z)(this,"removeNoti",(()=>{var t;null==this||null===(t=this.noti)||void 0===t||t.remove()}))}},h=n(6295).default;window._themeProducts;const m=async t=>{const e=await((t,e=i)=>new Promise(((n,o)=>{if(r.get(t))return n(r.get(t));fetch(t,e).then((e=>{const o=e.text();return n(o),r.set(t,o),o})).catch(o)})))(`/products/${t}?section_id=product-json`);if(e&&!/^<!doctype html>/.test(e)){const t=h("div",null);t.innerHTML=e;const n=t.querySelector("script.product-json");if(n){const e=JSON.parse(n.innerText);if(e){const{dataset:o}=n;Object.entries(o).forEach((([t,n])=>{return e[(o=t,o.replace(/[A-Z]/g,(t=>`_${t.toLowerCase()}`)))]=["true","false"].indexOf(n)+1?"true"===n:n;var o}));const a=t.querySelector("script.selected-variant-json");return a&&(e.selected_or_first_available_variant=JSON.parse(a.innerText)),e}}}return null};window._getProductInstances=t=>{let e="id";return"string"==typeof t&&(e="handle"),window.spratlyTheme.Products.productInstances.filter((n=>n.productData[e]===t))};var f=n(6295).default,v=()=>f("div",{className:"icon-plus hidden md:block"},f("svg",{className:"w-[20px] h-[20px]",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},f("path",{d:"M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z"}))),g=n(6295).default;function _(t){const{src:e,alt:n,style:o={},className:a="",onLoad:s=(()=>{}),onError:i=(()=>{})}=t,l=g("img",{style:o,className:`transition-opacity opacity-0 ${a}`,src:e,alt:n});function r(){s&&s(),l.classList.add("opacity-100"),l.removeEventListener("load",r),l.removeEventListener("error",c)}function c(t){i&&i(),l.style.opacity=0,l.removeEventListener("load",r),l.removeEventListener("error",c)}return l.addEventListener("load",r),l.addEventListener("error",c),l.complete&&l.naturalWidth&&r(),l}var w=n(6295).default;var y=({variant:t})=>{var e;const{money_format:n}=(null===(e=window)||void 0===e?void 0:e.spratlyThemeSettings)||{},o=w("span",{class:"prod__compare_price mr-2 line-through text-color-secondary"});o.innerHTML=a(t.compare_at_price,n);const s=w("span",{class:"prod__price"});return s.innerHTML=a(t.price,n),w("div",null,t.compare_at_price?o:null,t.price?s:null)},b=n(6295).default;var S=({url:t,title:e,handle:n})=>n===window.spratlyThemeSettings.productHandle?b("span",{className:"prod__title"},e):b("a",{href:t,className:"prod__title upsell cursor-pointer"},e),N=n(6295).default;var x=({product:t,layout:e})=>{var n;const{money_format:o}=(null===(n=window)||void 0===n?void 0:n.spratlyThemeSettings)||{};return t.has_only_default_variant?null:N("select",{name:"id",dataSet:{productHandle:t.handle},className:"sf-product-variant-option-dropdown combined-variant "+("layout-2"===e?"text-color-secondary":"")},t.variants.map((t=>{const n=N("span",null);return n.innerHTML=`- ${a(t.price,o)}`,N("option",{value:t.id},t.title," ","layout-1"===e?null:n)})))},T=n(6295).default;var k=({productHandle:t,className:e=""})=>{const n=t===window.spratlyThemeSettings.productHandle;return T("label",{className:`upsell__checkbox-label flex-shrink-0 mr-4 cursor-pointer relative ${n?"main-prod":""} ${e}`},T("input",{type:"checkbox",checked:"checked",className:"upsell__checkbox hidden",dataSet:{productHandle:t}}),T("span",{className:"upsell__checkmark absolute top-0 left-0 w-full h-full"}))},E=n(6295).default,L=n(7345).default;var O=({product:t,layout:e,position:n})=>{const o=t.selected_or_first_available_variant,a=t.handle===window.spratlyThemeSettings.productHandle;return E("div",{className:"sf-prod__block",dataSet:{view:"card",mainProduct:a}},E("form",{className:"product-form form",noValidate:!0,dataSet:{productId:t.id,productHandle:t.handle}},E("input",{hidden:!0,name:"id",required:!0,value:null==o?void 0:o.id}),"layout-2"===e?null:E("div",{className:"inline-flex md:hidden items-center"},E(k,{productHandle:t.handle,className:"block md:hidden"})),E("div",{className:"product-img select-none flex-shrink-0"},E("a",{className:"block cursor-pointer w-full "+(a?"pointer-events-none":""),href:t.url},E("div",{className:"spc__main-img transition-opacity duration-300 opacity-100 max-w-full",style:{"--aspect-ratio":t.aspect_ratio}},E(_,{style:{"object-fit":"contain"},src:t.featured_image,alt:t.title})))),E("div",{className:"upsell__prod-info flex flex-col"},"inside"===n&&"layout-2"===e?null:E("fragment",null,E(S,{title:t.title,handle:t.handle,url:t.url}),E(y,{variant:o})),E("div",{className:"flex mt-4",dataSet:{variantSelect:!0}},"inside"===n&&"layout-1"===e?null:E(k,{productHandle:t.handle}),"layout-1"===e?E(x,{product:t,layout:e}):E("div",{className:"content-group flex"},E(S,{title:`${a?`${L.tr("bundle_this_item")}:`:""} ${t.title}`,handle:t.handle,url:t.url}),E(x,{product:t,layout:e})))),"inside"===n&&"layout-1"===e?E("div",null,E("button",{className:"select-button sf__btn sf__btn-secondary selected "+(a?"main-prod":""),dataSet:{productHandle:t.handle}},L.tr(a?"bundle_this_item":"bundle_selected"))):null))},C=n(6295).default;var M=({discountSummary:t})=>t?C("div",{class:"bundle_discount flex items-center"},C("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",fill:"none",viewBox:"0 0 18 19"},C("path",{fill:"#DA3F3F",d:"M17.4375 7.49219C17.8125 8.00781 18 8.59375 18 9.25s-.1875 1.2539-.5625 1.793c-.375.5156-.8555.8789-1.4414 1.0898.2578.5625.3281 1.1719.2109 1.8281-.0937.6329-.375 1.1836-.8437 1.6524-.4688.4687-1.0195.75-1.6524.8437-.6328.1172-1.2421.0469-1.8281-.2109-.1406.3984-.3516.7383-.6328 1.0195-.2812.3047-.6211.5391-1.0195.7032-.37503.1874-.78519.2812-1.2305.2812-.65625 0-1.25391-.1875-1.79297-.5625-.51562-.375-.87891-.8555-1.08984-1.4414-.58594.2578-1.19531.3281-1.82813.2109-.63281-.0937-1.18359-.375-1.65234-.8437-.46875-.4688-.76172-1.0195-.87891-1.6524-.09375-.6562-.01172-1.2656.2461-1.8281C1.41797 11.9219.9375 11.5586.5625 11.043.1875 10.5039 0 9.90625 0 9.25s.1875-1.24219.5625-1.75781c.375-.53906.85547-.91407 1.44141-1.125-.25782-.5625-.33985-1.16016-.2461-1.79297.11719-.65625.41016-1.21875.87891-1.6875.46875-.46875 1.01953-.75 1.65234-.84375.65625-.11719 1.26563-.04688 1.82813.21094.21093-.58594.57422-1.06641 1.08984-1.44141C7.74609.4375 8.34375.25 9 .25s1.2422.1875 1.7578.5625c.5391.375.9141.85547 1.125 1.44141.5625-.25782 1.1602-.32813 1.793-.21094.6562.09375 1.2187.375 1.6875.84375.4687.46875.75 1.03125.8437 1.6875.1172.63281.0469 1.23047-.2109 1.79297.5859.21093 1.0664.58594 1.4414 1.125zM7.52344 6.22656C7.3125 5.99219 7.05469 5.875 6.75 5.875s-.57422.11719-.80859.35156C5.73047 6.4375 5.625 6.69531 5.625 7s.10547.57422.31641.80859c.23437.21094.5039.31641.80859.31641s.5625-.10547.77344-.31641C7.75781 7.57422 7.875 7.30469 7.875 7s-.11719-.5625-.35156-.77344zm-.35156 6.04684l4.85152-4.85152c.2578-.25782.2578-.51563 0-.77344l-.4218-.42188c-.2578-.25781-.5157-.25781-.7735 0L5.97656 11.0781c-.25781.2578-.25781.5157 0 .7735l.42188.4218c.25781.2578.51562.2578.77344 0zm3.26952.0352c.2344.2109.5039.3164.8086.3164.3047 0 .5625-.1055.7734-.3164.2344-.2344.3516-.5039.3516-.8086 0-.3047-.1172-.5625-.3516-.7734-.2109-.2344-.4687-.3516-.7734-.3516-.3047 0-.5742.1172-.8086.3516-.2109.2109-.3164.4687-.3164.7734 0 .3047.1055.5742.3164.8086z"})),t):null,P=n(6295).default,H=n(7345).default;function I({bundle_heading:t,products:e,layout:n,container:o,position:a,discountSummary:s,discountClass:i}){return P("div",{className:`prod-section-upsell ${"outside"===a?o:""} ${n} ${a} ${i}`,dataSet:{bundleContainer:"true"}},P("h3",{className:"upsell_heading"},t),P(M,{discountSummary:s}),P("div",{className:"upsell__container"},P("div",{className:"upsell__products-wrapper flex items-stretch"},e.filter(Boolean).map((t=>{const e=t.handle===window.spratlyThemeSettings.productHandle;return P("fragment",null,P(O,{product:t,layout:n,position:a}),!e||"inside"===a&&"layout-1"===n?null:P(v,null))}))),"layout-1"===n?null:P("div",{className:"upsell__products-info flex flex-col"}),P("div",{className:"total w-full"},P("div",{className:"total-block"},P("div",null,P("span",{className:"text-color-prod-desc"},H.tr("bundle_total"),":"),P("span",{dataSet:{total:!0},className:"mx-2 hidden text-lg line-through text-color-secondary leading-6"}),P("span",{dataSet:{subTotal:!0},className:"upsell__sub-total text-lg ml-2"})),P("div",{dataSet:{savedBlock:!0},className:"mt-1 hidden"},P("span",{className:"text-color-prod-desc"},H.tr("bundle_saved"),":"),P("span",{dataSet:{savedPrice:!0},className:"mx-2 text-lg text-color-secondary leading-6"})),P("button",{className:"sf__btn sf__btn-primary upsell__atc mt-5 flex justify-center w-full"},P("span",null,H.tr("bundle_button"))),P("div",{className:"upsell__error"})))))}var A=n(6295).default,Z=n(7345).default;String.prototype.capitalize||(String.prototype.capitalize=function(){var t,e;return this.replace(this[0],null===(t=this[0])||void 0===t||null===(e=t.toUpperCase)||void 0===e?void 0:e.call(t))});function j(t){var e,n,o,s;const i=A("span",null),l="PERCENTAGE"===(null==t?void 0:t.type)?`${null==t?void 0:t.value}%`:a(100*(null==t?void 0:t.value)*Number((null===(e=window.Shopify)||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.rate)||1),null===(o=window)||void 0===o||null===(s=o.spratlyThemeSettings)||void 0===s?void 0:s.money_format);return i.innerHTML=Z.tr("discount_summary",{discount_value:l}),i}var D=n(6295).default,$=n(7345).default;window.spratlyTheme=window.spratlyTheme||{},window.spratlyTheme.ProductBundle=class{constructor(e,n){var i,r,c;((0,t.Z)(this,"selectors",{bundleContainer:"[data-bundle-container]",productsWrapper:".upsell__products-wrapper",productForms:["form[data-product-id]"],variantSelects:["[data-variant-select]"],mainImg:"[data-main-product] .spc__main-img img",productsInfo:".upsell__products-info",iconPlus:".icon-plus",atc:".upsell__atc",total:".total",totalPrice:"[data-total]",subTotalPrice:"[data-sub-total]",savedBlock:"[data-saved-block]",savedPrice:"[data-saved-price]",errorWrapper:".upsell__error"}),(0,t.Z)(this,"spinner",D(o,{className:"m-0.5"})),(0,t.Z)(this,"products",[]),(0,t.Z)(this,"productInstances",[]),(0,t.Z)(this,"containerClass",window.spratlyThemeSettings.productContainer||"container"),(0,t.Z)(this,"money_format",(null===(i=window.spratlyThemeSettings)||void 0===i?void 0:i.money_format)||"${{amount}}"),(0,t.Z)(this,"init",(async()=>{try{this.products=await(async t=>{const e={},n=t.map((async t=>{e[t]=await m(t)}));return await Promise.all(n),t.map((t=>e[t]))})(this.handles);const{bundle_heading:t,position:e,layout:n,active_discount:o,discount:a}=this.settings,s=o&&a.value,i=D(I,{layout:n,container:this.containerClass,position:e,bundle_heading:t,products:this.products,discountSummary:s?j(a):null,discountClass:s?"has-discount":"no-discount"});this.container.appendChild(i),this.domNodes=function(t={},e=document){return Object.entries(t).reduce(((t,[n,o])=>{var a;const s="string"==typeof o,i=s?"querySelector":"querySelectorAll",l=s?o:o[0];return t[n]=null==e||null===(a=e[i])||void 0===a?void 0:a.call(e,l),!s&&t[n]&&(t[n]=[...t[n]]),t}),{})}(this.selectors,this.container);const l=this.domNodes.productForms.map((async t=>{const e=new window.spratlyTheme.Product(t,{autoInit:!0});await e.init(),e.selected=!0,this.productInstances.push(e)}));await Promise.all(l),"layout-1"===n?this.setTotalBlockShadow():"layout-2"===n&&this.moveVariantSelectsOut(),this.setMainImgHeight(),i.style.opacity=1}catch(t){}})),(0,t.Z)(this,"moveVariantSelectsOut",(()=>{const{variantSelects:t,productsInfo:e}=this.domNodes;t.forEach((t=>e.appendChild(t)))})),(0,t.Z)(this,"setMainImgHeight",(()=>{const t=()=>{const{mainImg:t}=this.domNodes;t&&this.container.style.setProperty("--main-img-height",`${t.offsetHeight}px`)};t(),window.addEventListener("resize",t)})),(0,t.Z)(this,"setTotalBlockShadow",(()=>{const t=()=>{var t,e;const{productsWrapper:n,total:o}=this.domNodes,{clientWidth:a,scrollWidth:s}=n,i=s>a?"add":"remove";null==o||null===(t=o.classList)||void 0===t||null===(e=t[i])||void 0===e||e.call(t,"has-shadow")};t(),window.addEventListener("resize",t)})),(0,t.Z)(this,"handleSelectProduct",(()=>{s({event:"change",context:this.container,selector:".sf-product-variant-option-dropdown",handler:this.setTotalPrices}),s({event:"change",context:this.container,selector:".upsell__checkbox",handler:(t,e)=>{const n=e.dataset.productHandle,o=this.productInstances.find((t=>t.productData.handle===n));o.selected=e.checked;const a=o.productHelper.domNodes.featuredImage;a&&(a.style.opacity=e.checked?1:.5),this.setTotalPrices()}}),s({context:this.container,selector:".select-button",handler:(t,e)=>{t.preventDefault(),e.blur();const n=e.dataset.productHandle,o=this.productInstances.find((t=>t.productData.handle===n)),a=e.classList.contains("selected");e.classList[a?"remove":"add"]("selected"),e.textContent=$.tr(a?"bundle_select":"bundle_selected"),o.selected=!a;const s=o.productHelper.domNodes.featuredImage;s&&(s.style.opacity=a?.6:1),this.setTotalPrices()}})})),(0,t.Z)(this,"handleAddToCart",(()=>{s({context:this.container,selector:this.selectors.atc,handler:()=>{const t=[];this.productInstances.forEach((e=>{e.selected&&t.push(Number(e.domNodes.variantIdNode.value))}));const e={items:t.map((t=>({id:t,quantity:1,properties:{_foxDiscount:{plugin:"Bundle",offer_id:this.settings._id}}})))},n=l();n.method="POST",n.body=JSON.stringify(e),this.toggleLoading(!0),fetch("/cart/add.js",n).then((async t=>{if(null!=t&&t.ok){const{items:e}=await t.json(),n=e.shift();window.Shopify.onItemAdded(n),e.forEach((t=>window.Shopify.onItemAdded(t,!1)))}else{const e=await t.json();this.showError((null==e?void 0:e.description)||"Failed to add all items to cart!")}setTimeout((()=>this.toggleLoading(!1)),300)})).catch((t=>{var e;this.showError(null==t||null===(e=t.toString)||void 0===e?void 0:e.call(t)),this.toggleLoading(!1)}))}})})),(0,t.Z)(this,"setTotalPrices",(()=>{const t=this.productInstances.filter((t=>t.selected)).map((t=>{const e=t.domNodes.variantIdNode.value;return t.productData.variants.find((t=>(null==t?void 0:t.id)===Number(e)))})).filter(Boolean);let e,n;const o=t.reduce(((t,e)=>t+e.price),0),{active_discount:s,discount:i}=this.settings;let l;if(s&&i&&i.value&&("PERCENTAGE"===i.type?l=o*(100-i.value)/100:"FIXED_AMOUNT"===i.type&&(l=o-100*i.value*this.products.length,l<0&&(l=0))),"number"==typeof l)e=o,n=l;else{const a=t.reduce(((t,e)=>t+(e.compare_at_price||e.price)),0);a>o&&(e=a),n=o}const r=e-n,{money_format:c}=this,{totalPrice:d,subTotalPrice:u,savedBlock:p,savedPrice:h}=this.domNodes;u.innerHTML=a(n,c),e?(d.innerHTML=a(e,c),h.innerHTML=a(r,c),p.classList.remove("hidden"),d.classList.remove("hidden")):(p.classList.add("hidden"),d.classList.add("hidden"))})),(0,t.Z)(this,"showError",(t=>{var e;p.show({target:null===(e=this.domNodes)||void 0===e?void 0:e.errorWrapper,method:"appendChild",type:"warning",message:t})})),(0,t.Z)(this,"toggleLoading",(t=>{var e;t?(this.domNodes.atc.appendChild(this.spinner),this.domNodes.atc.classList.add("sf-spinner-loading")):(null==this||null===(e=this.spinner)||void 0===e||e.remove(),this.domNodes.atc.classList.remove("sf-spinner-loading"))})),e&&n)&&(this.container=e,this.settings=n,this.settings.mainProduct=window.spratlyThemeSettings.productHandle,this.handles=[this.settings.mainProduct,...this.settings.products],null!==(r=this.handles)&&void 0!==r&&r.length?this.init().then((()=>{this.setTotalPrices(),this.handleSelectProduct(),this.handleAddToCart()})).catch((t=>{})):null==e||null===(c=e.remove)||void 0===c||c.call(e))}}}()}();